CodeMirror.defineMode("xml",function(v,k){var p=v.indentUnit;var u=k.htmlMode?{autoSelfClosers:{br:true,img:true,hr:true,link:true,input:true,meta:true,col:true,frame:true,base:true,area:true},doNotIndent:{pre:true,"!cdata":true},allowUnquoted:true}:{autoSelfClosers:{},doNotIndent:{"!cdata":true},allowUnquoted:false};var a=k.alignCDATA;var f,g;function o(z,y){function w(B){y.tokenize=B;return B(z,y)}var x=z.next();if(x=="<"){if(z.eat("!")){if(z.eat("[")){if(z.match("CDATA[")){return w(t("atom","]]>"))}else{return null}}else{if(z.match("--")){return w(t("comment","-->"))}else{if(z.match("DOCTYPE")){z.eatWhile(/[\w\._\-]/);return w(t("meta",">"))}else{return null}}}}else{if(z.eat("?")){z.eatWhile(/[\w\._\-]/);y.tokenize=t("meta","?>");return"meta"}else{g=z.eat("/")?"closeTag":"openTag";z.eatSpace();f="";var A;while((A=z.eat(/[^\s\u00a0=<>\"\'\/?]/))){f+=A}y.tokenize=n;return"tag"}}}else{if(x=="&"){z.eatWhile(/[^;]/);z.eat(";");return"atom"}else{z.eatWhile(/[^&<]/);return null}}}function n(y,x){var w=y.next();if(w==">"||(w=="/"&&y.eat(">"))){x.tokenize=o;g=w==">"?"endTag":"selfcloseTag";return"tag"}else{if(w=="="){g="equals";return null}else{if(/[\'\"]/.test(w)){x.tokenize=j(w);return x.tokenize(y,x)}else{y.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);return"word"}}}}function j(w){return function(y,x){while(!y.eol()){if(y.next()==w){x.tokenize=n;break}}return"string"}}function t(x,w){return function(z,y){while(!z.eol()){if(z.match(w)){y.tokenize=o;break}z.next()}return x}}var l,h;function b(){for(var w=arguments.length-1;w>=0;w--){l.cc.push(arguments[w])}}function e(){b.apply(null,arguments);return true}function i(w,y){var x=u.doNotIndent.hasOwnProperty(w)||(l.context&&l.context.noIndent);l.context={prev:l.context,tagName:w,indent:l.indented,startOfLine:y,noIndent:x}}function r(){if(l.context){l.context=l.context.prev}}function d(w){if(w=="openTag"){l.tagName=f;return e(m,c(l.startOfLine))}else{if(w=="closeTag"){var x=false;if(l.context){x=l.context.tagName!=f;r()}else{x=true}if(x){h="error"}return e(q(x))}else{if(w=="string"){if(!l.context||l.context.name!="!cdata"){i("!cdata")}if(l.tokenize==o){r()}return e()}else{return e()}}}}function c(w){return function(x){if(x=="selfcloseTag"||(x=="endTag"&&u.autoSelfClosers.hasOwnProperty(l.tagName.toLowerCase()))){return e()}if(x=="endTag"){i(l.tagName,w);return e()}return e()}}function q(w){return function(x){if(w){h="error"}if(x=="endTag"){return e()}return b()}}function m(w){if(w=="word"){h="attribute";return e(m)}if(w=="equals"){return e(s,m)}return b()}function s(w){if(w=="word"&&u.allowUnquoted){h="string";return e()}if(w=="string"){return e()}return b()}return{startState:function(){return{tokenize:o,cc:[],indented:0,startOfLine:true,tagName:null,context:null}},token:function(z,y){if(z.sol()){y.startOfLine=true;y.indented=z.indentation()}if(z.eatSpace()){return null}h=g=f=null;var x=y.tokenize(z,y);if((x||g)&&x!="comment"){l=y;while(true){var w=y.cc.pop()||d;if(w(g||x)){break}}}y.startOfLine=false;return h||x},indent:function(y,w){var x=y.context;if(x&&x.noIndent){return 0}if(a&&/<!\[CDATA\[/.test(w)){return 0}if(x&&/^<\//.test(w)){x=x.prev}while(x&&!x.startOfLine){x=x.prev}if(x){return x.indent+p}else{return 0}},compareStates:function(z,x){if(z.indented!=x.indented||z.tagName!=x.tagName){return false}for(var y=z.context,w=x.context;;y=y.prev,w=w.prev){if(!y||!w){return y==w}if(y.tagName!=w.tagName){return false}}},electricChars:"/"}});CodeMirror.defineMIME("application/xml","xml");CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});